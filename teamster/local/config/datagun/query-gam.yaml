resources:
  destination:
    config:
      remote_host:
        env: PYTHONANYWHERE_SFTP_HOST
      username:
        env: PYTHONANYWHERE_SFTP_USERNAME
      password:
        env: PYTHONANYWHERE_SFTP_PASSWORD
ops:
  compose_queries:
    config:
      destination:
        name: gam
        type: sftp
        path: "./sftp/gam"
      queries:
        - sql:
            schema:
              table:
                name: "gapps_users_students"
                schema: "gabby.extracts"
          file:
            stem: gapps_users_students
            suffix: json
        - sql:
            schema:
              table:
                name: "gapps_users_admins"
                schema: "gabby.extracts"
          file:
            stem: gapps_users_admins
            suffix: json
