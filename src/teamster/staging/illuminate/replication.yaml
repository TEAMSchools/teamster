source: POSTGRES_ILLUMINATE
target: BIGQUERY_TEAMSTER

defaults:
  mode: incremental
  object: "staging_{source_name}_{stream_schema}.{stream_table}"
  sql: |
    select *, xmin,
    from {stream_schema}.{stream_table}
    where xmin::text::bigint > coalesce({incremental_value}, 0) or xmin::text::bigint = 0

streams:
  dna_assessments.assessments:
    primary_key: assessment_id
    update_key: xmin
