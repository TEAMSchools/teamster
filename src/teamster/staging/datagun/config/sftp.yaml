key_prefix: staging
assets:
  - asset_name: test_datagun_sftp_textquery
    query_config:
      type: file
      value: src/teamster/staging/datagun/config/sql/test.sql
    file_config:
      stem: json-staging-{now}
      suffix: json.gz
    destination_config:
      name: staging
      path: sftp/staging-path
  - asset_name: test_datagun_sftp_schemaquery
    query_config:
      type: schema
      value:
        table:
          name: row_generator_smallint
          schema: utilities
        select:
          - n
          - n + 1
          - n + 2
          - n + 3
          - n + 4
        where: n <= 5
    file_config:
      stem: tsv-staging-{today}
      suffix: txt
      encoding: latin1
      format:
        quoting: 1 # csv.QUOTE_ALL
        sep: "\t"
    destination_config:
      name: staging
      path: sftp/staging-path
