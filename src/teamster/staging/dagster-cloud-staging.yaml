locations:
  - location_name: staging
    code_source:
      module_name: teamster.staging.definitions
    build:
      directory: ./
      registry: us-central1-docker.pkg.dev/teamster-332318/teamster-staging/teamster-staging
    working_directory: /root/app
    container_context:
      k8s:
        server_k8s_config:
          container_config:
            env:
              - name: ONEPASSWORD_ITEM_TEST_1_USERNAME
                valueFrom:
                  secretKeyRef:
                    name: onepassword-item-test
                    key: username
              - name: ONEPASSWORD_ITEM_TEST_1_PASSWORD
                valueFrom:
                  secretKeyRef:
                    name: onepassword-item-test
                    key: password
              - name: ONEPASSWORD_ITEM_TEST_2_USERNAME
                valueFrom:
                  secretKeyRef:
                    name: onepassword-item-test-2
                    key: username
              - name: ONEPASSWORD_ITEM_TEST_2_PASSWORD
                valueFrom:
                  secretKeyRef:
                    name: onepassword-item-test-2
                    key: password
        run_k8s_config:
          container_config:
            env:
              - name: ONEPASSWORD_ITEM_TEST_1_USERNAME
                valueFrom:
                  secretKeyRef:
                    name: onepassword-item-test
                    key: username
              - name: ONEPASSWORD_ITEM_TEST_1_PASSWORD
                valueFrom:
                  secretKeyRef:
                    name: onepassword-item-test
                    key: password
              - name: ONEPASSWORD_ITEM_TEST_2_USERNAME
                valueFrom:
                  secretKeyRef:
                    name: onepassword-item-test-2
                    key: username
              - name: ONEPASSWORD_ITEM_TEST_2_PASSWORD
                valueFrom:
                  secretKeyRef:
                    name: onepassword-item-test-2
                    key: password
        volumes:
          - name: secret-volume
            secret:
              secretName: secret-files
        volume_mounts:
          - name: secret-volume
            readOnly: true
            mountPath: /etc/secret-volume
