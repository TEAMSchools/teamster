semantic_models:
  #The name of the semantic model.
  - name: n_hires
    defaults:
      agg_time_dimension: worker_original_hire_date
    description: |
      Fact table for number of hires. This table is at the worker grain with one row per worker
    #The name of the dbt model and schema
    model: ref('base_people__staff_roster')
    #Entities. These usually corespond to keys in the table.
    entities:
      - name: employee_number
        type: primary
      - name: report_to_employee_number
        type: foreign
    #Measures. These are the aggregations on the columns in the table.
    measures:
      - name: hire_count
        description: The total number of new hires
        expr: 1
        agg: sum
      - name: total_new_salary
        description: The total salary amount for the new hires.
        expr: base_remuneration_annual_rate_amount_amount_value
        agg: sum
      - name: locations_with_hires
        description: Distinct count of locations hiring new people
        agg: count_distinct
        expr: home_work_location_name
      - name: job_titles_with_hires
        description: Distinct count of job titles with hire
        expr: job_title
        agg: count_distinct
      - name: managers_with_hires
        description: Distinct count of managers with hire
        expr: report_to_employee_number
        agg: count_distinct
    #Dimensions. Either categorical or time. These add additional context to metrics. The typical querying pattern is Metric by Dimension.
    dimensions:
      - name: worker_original_hire_date_day
        type: time
        type_params:
          time_granularity: day
        expr: worker_original_hire_date
      - name: worker_original_hire_date_month
        type: time
        type_params:
          time_granularity: month
        expr: worker_original_hire_date
      - name: worker_original_hire_date_year
        type: time
        type_params:
          time_granularity: year
        expr: worker_original_hire_date
      - name: home_work_location_name
        type: categorical
      - name: job_title
        type: categorical
      - name: business_unit_home_name
        type: categorical
