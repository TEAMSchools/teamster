semantic_models:
  - name: dim_staff
    model: ref('dim_staff')
    description: Staff roster dimension with job info

    entities:
      - name: teammate
        type: primary
        expr: employee_number

    dimensions:
      - name: assignment_status
        type: categorical
        expr: assignment_status

      - name: race_ethnicity_reporting
        type: categorical
        expr: race_ethnicity_reporting

      - name: entity
        type: categorical
        expr: home_business_unit_name

      - name: location
        type: categorical
        expr: home_work_location_name

      - name: grade_band
        type: categorical
        expr: home_work_location_grade_band

      - name: department
        type: categorical
        expr: home_department_name

      - name: job_title
        type: categorical
        expr: job_title

      - name: manager
        type: categorical
        expr: reports_to_formatted_name

      - name: worker_original_hire_date
        type: time
        type_params:
          time_granularity: day

      - name: work_assignment_actual_start_date
        type: time
        type_params:
          time_granularity: day

      - name: is_teacher
        type: categorical
        expr: case when job_title in ('Teacher','Learning Specialist','Teacher in Residence','Teacher ESL', 'Teacher in Residence ESL', 'ESE Teacher') then true else false end

    measures:
      - name: staff_count
        description: Total number of staff
        agg: count
        expr: employee_number
        agg_time_dimension: worker_original_hire_date

metrics:
  - name: staff_count
    description: count of staff employee numbers
    type: simple
    label: staff_count
    type_params:
      measure:
        name: staff_count
