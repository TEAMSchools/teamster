{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"teamster","text":"<p>Next-gen data orchestration</p>"},{"location":"#features","title":"Features","text":""},{"location":"#dagster","title":"Dagster","text":"<p>Dagster is our data orchestrator. Every ETL step takes place here.</p> <p>Dagster Cloud is a hosted front-end for our Dagster servers where you can observe and run integration jobs.</p> <p>Dagster hosts multiple \"code locations\", one for each of our business units, including a separate one for our CMO:</p> <ul> <li>kippnewark</li> <li>kippcamden</li> <li>kippmiami</li> <li>kipptaf</li> </ul> <p>Each code location hosts and runs the code and configurations for each respective business unit. Behind-the-scenes, these are containers run on Google Cloud Kubernetes. Each code location has it's own respective jobs, schedules, sensors, and assets.</p>"},{"location":"#dbt-github","title":"dbt &amp; Github","text":"<p>Before you merge:</p> <ol> <li>Ensure dbt build runs successfully on your branch</li> <li>Format your SQL changes in dbt</li> <li>Ensure the Dagster build action runs successfully</li> </ol>"},{"location":"#google-cloud-platform","title":"Google Cloud Platform","text":"<ul> <li>Private GKE Autopilot   cluster</li> <li>Cloud NAT provided   static external IP for the cluster</li> <li>Google Artifact Registry</li> <li>Google Cloud services access prodivded by   Workload Identity</li> <li>GitHub Actions for CI/CD</li> </ul>"},{"location":"#airbyte","title":"Airbyte","text":""},{"location":"CODE_OF_CONDUCT/","title":"Contributor Covenant Code of Conduct","text":""},{"location":"CODE_OF_CONDUCT/#our-pledge","title":"Our Pledge","text":"<p>We as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone, regardless of age, body size, visible or invisible disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, or sexual identity and orientation.</p> <p>We pledge to act and interact in ways that contribute to an open, welcoming, diverse, inclusive, and healthy community.</p>"},{"location":"CODE_OF_CONDUCT/#our-standards","title":"Our Standards","text":"<p>Examples of behavior that contributes to a positive environment for our community include:</p> <ul> <li>Demonstrating empathy and kindness toward other people</li> <li>Being respectful of differing opinions, viewpoints, and experiences</li> <li>Giving and gracefully accepting constructive feedback</li> <li>Accepting responsibility and apologizing to those affected by our mistakes,   and learning from the experience</li> <li>Focusing on what is best not just for us as individuals, but for the overall   community</li> </ul> <p>Examples of unacceptable behavior include:</p> <ul> <li>The use of sexualized language or imagery, and sexual attention or advances of   any kind</li> <li>Trolling, insulting or derogatory comments, and personal or political attacks</li> <li>Public or private harassment</li> <li>Publishing others' private information, such as a physical or email address,   without their explicit permission</li> <li>Other conduct which could reasonably be considered inappropriate in a   professional setting</li> </ul>"},{"location":"CODE_OF_CONDUCT/#enforcement-responsibilities","title":"Enforcement Responsibilities","text":"<p>Community leaders are responsible for clarifying and enforcing our standards of acceptable behavior and will take appropriate and fair corrective action in response to any behavior that they deem inappropriate, threatening, offensive, or harmful.</p> <p>Community leaders have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, and will communicate reasons for moderation decisions when appropriate.</p>"},{"location":"CODE_OF_CONDUCT/#scope","title":"Scope","text":"<p>This Code of Conduct applies within all community spaces, and also applies when an individual is officially representing the community in public spaces. Examples of representing our community include using an official e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event.</p>"},{"location":"CODE_OF_CONDUCT/#enforcement","title":"Enforcement","text":"<p>Instances of abusive, harassing, or otherwise unacceptable behavior may be reported to the community leaders responsible for enforcement at [INSERT CONTACT METHOD]. All complaints will be reviewed and investigated promptly and fairly.</p> <p>All community leaders are obligated to respect the privacy and security of the reporter of any incident.</p>"},{"location":"CODE_OF_CONDUCT/#enforcement-guidelines","title":"Enforcement Guidelines","text":"<p>Community leaders will follow these Community Impact Guidelines in determining the consequences for any action they deem in violation of this Code of Conduct:</p>"},{"location":"CODE_OF_CONDUCT/#1-correction","title":"1. Correction","text":"<p>Community Impact: Use of inappropriate language or other behavior deemed unprofessional or unwelcome in the community.</p> <p>Consequence: A private, written warning from community leaders, providing clarity around the nature of the violation and an explanation of why the behavior was inappropriate. A public apology may be requested.</p>"},{"location":"CODE_OF_CONDUCT/#2-warning","title":"2. Warning","text":"<p>Community Impact: A violation through a single incident or series of actions.</p> <p>Consequence: A warning with consequences for continued behavior. No interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, for a specified period of time. This includes avoiding interactions in community spaces as well as external channels like social media. Violating these terms may lead to a temporary or permanent ban.</p>"},{"location":"CODE_OF_CONDUCT/#3-temporary-ban","title":"3. Temporary Ban","text":"<p>Community Impact: A serious violation of community standards, including sustained inappropriate behavior.</p> <p>Consequence: A temporary ban from any sort of interaction or public communication with the community for a specified period of time. No public or private interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, is allowed during this period. Violating these terms may lead to a permanent ban.</p>"},{"location":"CODE_OF_CONDUCT/#4-permanent-ban","title":"4. Permanent Ban","text":"<p>Community Impact: Demonstrating a pattern of violation of community standards, including sustained inappropriate behavior, harassment of an individual, or aggression toward or disparagement of classes of individuals.</p> <p>Consequence: A permanent ban from any sort of public interaction within the community.</p>"},{"location":"CODE_OF_CONDUCT/#attribution","title":"Attribution","text":"<p>This Code of Conduct is adapted from the Contributor Covenant, version 2.1, available at https://www.contributor-covenant.org/version/2/1/code_of_conduct.html.</p> <p>Community Impact Guidelines were inspired by Mozilla's code of conduct enforcement ladder.</p> <p>For answers to common questions about this code of conduct, see the FAQ at https://www.contributor-covenant.org/faq. Translations are available at https://www.contributor-covenant.org/translations.</p>"},{"location":"CONTRIBUTING/","title":"Welcome to the TEAMster contributing guide","text":"<p>Read our Code of Conduct to keep our community approachable and respectable.</p> <p>In this guide you will get an overview of the contribution workflow from creating a branch, creating a pull request, reviewing, and merging the pull request.</p> <p>Here are some resources to help you get started with open source contributions:</p> <ul> <li>GitHub flow</li> <li>Collaborating with pull requests</li> </ul>"},{"location":"CONTRIBUTING/#project-structure","title":"Project structure","text":"<p>All of our source code is located under the <code>src/</code> directory.</p> <p><code>src/teamster/</code> contains all of our Dagster code, which powers our data orchestration.</p> <p><code>src/dbt/</code> contains all of our dbt code, which is organized by project.</p>"},{"location":"CONTRIBUTING/#dbt-projects","title":"dbt Projects","text":"<p><code>kipptaf</code> is the homebase for all CMO-level reporting. This project contains views that aggregate regional tables as well as CMO-specific data. This is the only project that dbt Cloud is configured to work with.</p> <p><code>kippnewark</code>, <code>kippcamden</code>, <code>kippmiami</code>, and <code>kipppaterson</code> contain regional configurations that ensure their data is loaded into their respective datasets.</p> <p>Other projects (e.g. <code>powerschool</code>, <code>deanslist</code>, <code>iready</code>) contain code for systems that is used across multiple regions. Keeping these projects as installable dependencies allows us to maintain the code in one place and use it across as many projects as needed.</p>"},{"location":"CONTRIBUTING/#account-setup","title":"Account setup","text":""},{"location":"CONTRIBUTING/#github","title":"GitHub","text":"<p>To contribute on GitHub, you must be a member of our Data Team, and your ability to approve and merge pull requests depends on your membership in one of these subgroups:</p> <ul> <li>Analytics Engineers</li> <li>Data Engineers</li> <li>Admins</li> </ul>"},{"location":"CONTRIBUTING/#google-workspace","title":"Google Workspace","text":"<p>To access our BigQuery project and its datasets, you must be a member of our TEAMster Analysts KTAF Google security group.</p>"},{"location":"CONTRIBUTING/#dbt-cloud","title":"dbt Cloud","text":""},{"location":"CONTRIBUTING/#dataset","title":"Dataset","text":"<p>When you first login to dbt Cloud, you will be asked to set up Development credentials.</p> <p>dbt will create a development \"branch\" of the database for every user, and it will name datasets using a prefix that is unique to you.</p> <p>By default, this is your username, but please prefix it with an underscore ( <code>_</code> ) to avoid cluttering up our BigQuery navigation. BigQuery will hide any datasets that begin with an underscore from the left nav.</p> <p></p>"},{"location":"CONTRIBUTING/#sqlfmt","title":"sqlfmt","text":"<p>To format our SQL code, we use sqlfmt, an uncompromising SQL query formatter that provides one way to format SQL and works with Jinja templating.</p> <p>To confirm that dbt Cloud is set up to use sqlfmt:</p> <ol> <li>Make sure you're on a development branch. Formatting isn't available on main    or read-only branches.</li> <li>Open a <code>.sql</code> file and click on the Code Quality tab.</li> <li>Click on the &lt;/&gt; Config button on the right side of the    console.</li> <li>In the code quality tool config pop-up, you have the option to select    sqlfluff or sqlfmt.</li> <li>To format your code, select the <code>sqlfmt</code> radio button.</li> <li>Once selected, go to the console section (located below the File editor) and    select the Format button.</li> <li>This button auto-formats your code in the File editor. Once you've    auto-formatted, you'll see a message confirming the outcome.</li> </ol>"},{"location":"CONTRIBUTING/#make-changes","title":"Make Changes","text":""},{"location":"CONTRIBUTING/#folder-structure-file-names","title":"Folder structure &amp; file names","text":"<p>Folder structure is extremely important in dbt. It should reflect how the data flows, step-by-step, from a wide variety of source-conformed models into fewer, richer business-conformed models.</p> <p>Creating a consistent pattern of file naming is crucial in dbt. File names must be unique and correspond to the name of the model when selected and created in the warehouse.</p> <p>We recommend putting as much clear information into the file name as possible, including a prefix for the layer the model exists in, important grouping information, and specific information about the entity or transformation in the model.</p>"},{"location":"CONTRIBUTING/#staging","title":"Staging","text":"<p>Modular building blocks from source data</p> <ul> <li>Folder structure: ...</li> <li>File naming convention: <code>stg_{source}__{entity}.sql</code></li> </ul>"},{"location":"CONTRIBUTING/#intermediate","title":"Intermediate","text":"<p>Layers of logic with clear and specific purposes, preparing our staging models to join into the entities we want</p> <ul> <li>Folder structure: subdirectories by area of business concern</li> <li>File naming: <code>int_{business concern}__{entity}_{verb}.sql</code></li> <li>business concerns:<ul> <li><code>assessments</code></li> <li><code>surveys</code></li> <li><code>people</code></li> </ul> </li> <li>verbs:<ul> <li><code>pivot</code></li> <li><code>unpivot</code></li> <li><code>rollup</code></li> </ul> </li> </ul>"},{"location":"CONTRIBUTING/#marts","title":"Marts","text":"<p>bringing together our modular pieces into a wide, rich vision of the entities our organization cares about</p>"},{"location":"CONTRIBUTING/#create-a-branch","title":"Create a branch","text":"<p>Version control basics</p> <p></p>"},{"location":"CONTRIBUTING/#make-your-changes","title":"Make your changes","text":"<p>...</p>"},{"location":"CONTRIBUTING/#commit-your-changes","title":"Commit your changes","text":""},{"location":"CONTRIBUTING/#open-a-pull-request","title":"Open a pull request","text":"<p>When you're finished making changes, create a Pull Request (\"PR\").</p> <ol> <li>On dbt Cloud, click    </li> <li>On the GitHub page that pops up, click \"Create pull request\"    </li> <li>Fill in the \"Summary &amp; Motivation\" section of the pull request template and    click \"Create pull request\".</li> </ol>"},{"location":"CONTRIBUTING/#code-review","title":"Code review","text":"<p>Once created, Zapier will create a task for your pull request in our Teamster Asana Project.</p> <ul> <li> Find yours by the title or number</li> <li> Update the due date and assignee</li> <li> Ensure that you are a follower on the task</li> </ul> <p>GitHub will automatically assign default reviewers based on the location of the code changes submitted:</p> Filepath Default Approvers <code>src/dbt/kipptaf/models/extracts/</code> Analytics Engineers <code>src/teamster/</code> Data Engineers <code>docs/</code> Data Team All other directories Admins <p>A series of automatic checks will then run on the code that you submitted.</p>"},{"location":"CONTRIBUTING/#resolving-merge-confilcts","title":"Resolving merge confilcts","text":"<p>If you run into any merge issues, checkout this git tutorial to help you resolve merge conflicts and other issues.</p>"},{"location":"CONTRIBUTING/#trunk","title":"Trunk","text":"<p>Trunk is a tool that runs multiple \"linters\" that check for common errors and enforces style.</p> Language Linter(s) SQL SQLFluff Python Ruff What if I can't fix the issue? <p>Find another place to work!</p>"},{"location":"CONTRIBUTING/#dbt-cloud_1","title":"dbt Cloud","text":"<p>dbt Cloud will create branch a dataset for your pull request on BigQuery and attempt to build the modified files.</p> <p>If there are any issues with your code, the check will fail, and you can find the reasons by:</p> <ol> <li>Clicking on the <code>Details</code> link</li> <li>Expanding the Invoke <code>dbt build ...</code> section</li> <li>Selecting Debug Logs</li> </ol> <p></p> <p></p> <ul> <li>We may ask for changes to be made before a PR can be merged, either using   suggested changes   or pull request comments. You can apply suggested changes directly through the   UI. You can make any other changes in your fork, then commit them to your   branch.</li> <li>As you update your PR and apply changes, mark each conversation as   resolved.</li> </ul>"},{"location":"CONTRIBUTING/#your-pr-is-merged","title":"Your PR is merged","text":"<p>Congratulations  </p> <p>Once your PR is merged...</p> <ul> <li>GitHub updates Dagster</li> <li>Dagster scans for code changes every 5 minutes</li> <li>Dagster will launch a run to update all changed models</li> </ul>"},{"location":"SECURITY/","title":"Security Policy","text":""},{"location":"SECURITY/#supported-versions","title":"Supported Versions","text":"<p>Use this section to tell people about which versions of your project are currently being supported with security updates.</p> Version Supported 5.1.x 5.0.x 4.0.x &lt; 4.0"},{"location":"SECURITY/#reporting-a-vulnerability","title":"Reporting a Vulnerability","text":"<p>Use this section to tell people how to report a vulnerability.</p> <p>Tell them where to go, how often they can expect to get an update on a reported vulnerability, what to expect if the vulnerability is accepted or declined, etc.</p>"},{"location":"SUPPORT/","title":"Support","text":""},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#collaboration","title":"Collaboration","text":"<ul> <li>Asana</li> <li>1Password</li> <li>GitHub</li> </ul>"},{"location":"getting-started/#analytics-engineering","title":"Analytics Engineering","text":"<ul> <li>dbt</li> <li>BigQuery</li> <li>Tableau</li> </ul>"},{"location":"getting-started/#data-engineering","title":"Data Engineering","text":"<ul> <li>Dagster</li> <li>dlt</li> <li>Airbyte</li> <li>VS Code</li> </ul>"},{"location":"getting-started/#helpful-tools","title":"Helpful Tools","text":"<ul> <li>RegExr</li> </ul>"},{"location":"guides/dagster/","title":"Dagster","text":"<p>DON'T PANIC! </p>"},{"location":"guides/dagster/#tier-1-troubleshooting","title":"Tier 1 Troubleshooting","text":""},{"location":"guides/dagster/#asset-health","title":"Asset health","text":"<p>Check the Asset Health page for failed materializations. If there are any, click on the link to the Asset Overview and click the \"Materialize...\" button to force a new run. If the asset is partitioned, go to the \"Partitions\" view, filter for \"Failed\" partitions and materialize only those partitions.</p>"},{"location":"guides/dagster/#slack-alerts","title":"Slack alerts","text":"<p>Check #dagster-alerts on Slack for failed Job runs. These are rare, but you may see some logs from our nightly user-provisioning scripts. Typically, they indicate an issue on the vendor side or something that will require a manual intervention (e.g. a rehire uses their work email as their personal email on ADP) or a code change. Log them on Asana.</p>"},{"location":"guides/dagster/#tableau-workbooks","title":"Tableau Workbooks","text":""},{"location":"guides/dagster/#how-to-manage-tableau-refresh-schedules","title":"How to manage Tableau refresh schedules","text":"<p>Our Tableau workbook assets are defined according to the configurations contained in <code>src/teamster/code_locations/kipptaf/tableau/config/assets.yaml</code>.</p> <p>To create or update a refresh schedule:</p> <p>Add or edit the value of <code>assets[*].metadata.cron_schedule</code> with a valid cron string. It can be either a string (for a single schedule tick) or a list of strings (for multiple).</p> <p>Tip</p> <p>Use crontab guru as a cron reference.</p> <pre><code>- name: My Tableau Workbook\n  deps:\n    - [spam, eggs, jeff]\n  metadata:\n    id: 0n371m37-h34c-702w-h0p1-4y3dm2831v3d\n    cron_schedule: 0 2 * * *\n- name: My Other Tableau Workbook\n  deps:\n    - [foo, bar, baz]\n  metadata:\n    id: 3235470n-h158-4115-4nd7-h3yh4d705hu7\n    cron_schedule:\n      - 0 0 * * *\n      - 0 12 * * *\n</code></pre> <p>To \"turn off\" a schedule, simply comment out the <code>cron_schedule</code> attribute:</p> <pre><code>- name: My Tableau Workbook\n  deps:\n    - [spam, eggs, jeff]\n  metadata:\n    id: 0n371m37-h34c-702w-h0p1-4y3dm2831v3d\n    # cron_schedule: 0 2 * * *\n- name: My Other Tableau Workbook\n  deps:\n    - [foo, bar, baz]\n  metadata:\n    id: 3235470n-h158-4115-4nd7-h3yh4d705hu7\n    # cron_schedule:\n    #   - 0 0 * * *\n    #   - 0 12 * * *\n</code></pre>"},{"location":"guides/dbt/","title":"dbt","text":""},{"location":"guides/dbt/#adding-a-google-sheets-source-to-dbt","title":"Adding a Google Sheets source to dbt","text":"<ol> <li> <p>Create your sheet    Data Integration / Google Sheets / In.</p> </li> <li> <p>Add a named range. This should encompass the entirety of the tab.</p> </li> <li> <p>Update <code>src/dbt/kipptaf/models/google/sheets/sources-drive.yml</code>. Add a new    entry under the <code>tables</code> attribute. Use the example below, replacing the    variables with your specific sheet's information.</p> </li> </ol> Variable Description SOURCE_NAME The name of the collection for your source tables SOURCE_TABLE_NAME The name of the source table, as it will appear in the database SHEET_URL The full URL of the Google Sheet, including <code>https://...</code> NAMED_RANGE The name of the range you defined in step 2. <pre><code>sources:\n  - name: ...\n    tables:\n      ...\n      - name: src_google_sheets__{SOURCE NAME}__{SOURCE TABLE NAME}\n        external:\n          options:\n            format: GOOGLE_SHEETS\n            uris:\n              - {SHEET URL}\n            sheet_range: {NAMED RANGE}\n            skip_leading_rows: 1\n        meta:\n          dagster:\n            asset_key:\n              - kipptaf\n              - {SOURCE NAME}\n              - {SOURCE TABLE NAME}\n</code></pre> <ol> <li>Update the external source definition</li> </ol> <pre><code>dbt run-operation stage_external_sources --vars \"{'ext_full_refresh': 'true'}\" --args \"select: [model name(s)]\"\n</code></pre> <ol> <li>Create a staging model. Create a simple <code>select *</code> statement--this will help    catch unexpected changes to the table schema--and add any calculated fields    you require.</li> </ol> <pre><code>select *, spam + 1 as eggs, from {{ source(\"{SOURCE NAME}\", \"{SOURCE TABLE NAME}\") }}\n</code></pre> <ol> <li>Create a corresponding properties file for the staging model</li> </ol> <p>File name: <code>../properties/STAGING_MODEL_NAME.yml</code></p> Variable Description <code>models[].name</code> The exact name of your staging model <code>columns[].name</code> Column names are case-sensitive <code>data_type</code> BigQuery Data Type Reference <pre><code>models:\n  - name: {STAGING MODEL NAME}\n    columns:\n      - name: {COLUMN NAME 1}\n        data_type: {COLUMN TYPE 1}\n      - name: {COLUMN NAME 2}\n        data_type: {COLUMN TYPE 2}\n      ...\n      - name: {COLUMN NAME N}\n        data_type: {COLUMN TYPE N}\n</code></pre> <ol> <li>Build your staging model</li> </ol>"},{"location":"guides/dbt/#updating-a-google-sheets-source","title":"Updating a Google Sheets source","text":"<ol> <li> <p>Duplicate the tab that you are modifying. If you will only be adding columns    to the end of the sheet, you can skip this step.</p> </li> <li> <p>Create a new named range. Use the same name but suffixed with something to    make it unique (e.g. <code>_new</code>, <code>_v2</code>)</p> </li> <li> <p>Update <code>src/dbt/kipptaf/models/google/sheets/sources-drive.yml</code>. Update the    <code>sheet_range</code> attribute with the new named range.</p> </li> <li> <p>Make your changes to the sheet.</p> </li> <li> <p>If necessary, update column definitions on the source YAML.</p> </li> <li> <p>Update the external source definition</p> </li> </ol> <pre><code>dbt run-operation stage_external_sources --vars \"{'ext_full_refresh': 'true'}\" --args \"select: [model name(s)]\"\n</code></pre> <ol> <li>Update the data contract for your staging file</li> </ol>"},{"location":"troubleshooting/dagster/","title":"Troubleshooting :: Dagster","text":""},{"location":"troubleshooting/dagster/#check-dagster-alerts-if-there-is-a-run-failure-notification","title":"Check <code>#dagster-alerts</code>. If there is a run failure notification","text":"<ol> <li>Click on the link to the failed run.</li> <li>Determine whether the failure is a framework error or a programming error.     Typically, it's a famework error.<ul> <li>framework error: re-execute the run \"From Failure\"</li> <li>programming error: examine the run logs and determine the cause. Fix via   pull request</li> <li>Python: focus on the traceback in the <code>STEP_FAILURE</code> log</li> <li>dbt: go to \"Raw compute logs\" and find the dbt error to fix     </li> </ul> </li> </ol>"}]}