########################################################################################
# Dagster Cloud: Config for Dagster Cloud's hosted resources
########################################################################################
dagsterCloud:
  # Specify the Dagster Cloud deployments (e.g. dev, staging, prod) that the agent should serve.
  deployments:
    - prod

  # Specify whether the agent should also serve branch deployments for your organization.
  branchDeployments: true
########################################################################################
# Dagster Cloud Agent: Configuration for the Dagster Cloud (User) Agent
########################################################################################
dagsterCloudAgent:
  # Additional environment variables to set.
  # A Kubernetes ConfigMap will be created with these environment variables. See:
  # https://kubernetes.io/docs/concepts/configuration/configmap/
  env:
    DAGSTER_GRPC_TIMEOUT_SECONDS: "120"
#   resources:
#     limits:
#       cpu: 250m
#       memory: 1.0Gi
#     requests:
#       cpu: 250m
#       memory: 1.0Gi

########################################################################################
# Workspace: Configuration for pods (launched by the agent) that run Dagster user code
########################################################################################
workspace:
  # Specify TTL for user code servers.
  # By default full deployment servers do not have a TTL.
  # Branch deployments servers have a default TTL of 24 hours.
  # The max code servers defaults to 25, and only applies to servers with TTL.
  serverTTL:
    fullDeployments:
      enabled: true
      ttlSeconds: 300
    branchDeployments:
      ttlSeconds: 300

  # # Default compute resource requirements for the pods created by the agent. See:
  # # https://kubernetes.io/docs/concepts/configuration/manage-resources-containers
  # resources:
  #   limits:
  #     cpu: 500m
  #     memory: 1.0Gi
  #   requests:
  #     cpu: 500m
  #     memory: 1.0Gi

  # # Raw k8s configuration for the Kubernetes Deployment created for each code location.
  # serverK8sConfig:
  #   containerConfig: # raw config for the pod's main container
  #     resources:
  #       limits:
  #         cpu: 1000m
  #         memory: 1.5Gi
  #       requests:
  #         cpu: 1000m
  #         memory: 1.5Gi

  # # Specifies the timeout in seconds the agent should use when waiting for a code
  # # server to be ready after the Kubernetes deployment is created.
  # # If not set, defaults to 180 seconds. This timeout should be increased if your code
  # # locations can take more than 3 minutes to load your Dagster definitions.
  # serverProcessStartupTimeout: 360
########################################################################################
# Extra Manifests: (Optional) Create additional k8s resources within this chart
########################################################################################
# extraManifests:
#   # https://github.com/1Password/onepassword-operator#usage
#   - apiVersion: onepassword.com/v1
#     kind: OnePasswordItem
#     metadata:
#       name: test-onepassword-item
#     spec:
#       itemPath: vaults/Data Team/items/PowerSchool SSH (Newark)
